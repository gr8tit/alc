<html>
 <head>
 <meta http-equiv="Pragma" content="no-cache">
 <meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
 <title>Web Authentication</title>
 <script>

 function submitAction(){
       var link = document.location.href;
       var searchString = "redirect=";
       var equalIndex = link.indexOf(searchString);
       var redirectUrl = "";
       var urlStr = "";
       if(equalIndex > 0) {
             equalIndex += searchString.length;
             urlStr = link.substring(equalIndex);
             if(urlStr.length > 0){
 				redirectUrl += urlStr;
   			    if(redirectUrl.length > 255)
 				    redirectUrl = redirectUrl.substring(0,255);
 			    document.forms[0].redirect_url.value = redirectUrl;
 			}
       }

       document.forms[0].buttonClicked.value = 4;
       document.forms[0].submit();
 }

 function loadAction(){
       var url = window.location.href;
       var args = new Object();
       var query = location.search.substring(1);
       var pairs = query.split("&");
       for(var i=0;i<pairs.length;i++){
           var pos = pairs[i].indexOf('=');
           if(pos == -1) continue;
           var argname = pairs[i].substring(0,pos);
           var value = pairs[i].substring(pos+1);
           args[argname] = unescape(value);
       }
       alert( "AP MAC Address is " + args.ap_mac);
       alert( "The Switch URL to post user credentials is " + args.switch_url);
       document.forms[0].action = args.switch_url;

       // This is the status code returned from webauth login action
       // Any value of status code from 1 to 5 is error condition and user
       // should be shown error as below or modify the message as it suits
       // the customer
       if(args.statusCode == 1){
         alert("You are already logged in. No further action is required on your part.");
       }
       else if(args.statusCode == 2){
         alert("You are not configured to authenticate against web portal. No further action is required on your part.");
       }
       else if(args.statusCode == 3){
         alert("The username specified cannot be used at this time. Perhaps the username is already logged into the system?");
       }
       else if(args.statusCode == 4){
         alert("The User has been excluded. Please contact the administrator.");
       }
       else if(args.statusCode == 5){
         alert("Invalid username and password. Please try again.");
       }

 }

 </script>
 </head>
 <body topmargin="50" marginheight="50" onload="loadAction();">
 <form method="post" action="https://1.1.1.1/login.html">
 <input TYPE="hidden" NAME="buttonClicked" SIZE="16" MAXLENGTH="15" value="0">
 <input TYPE="hidden" NAME="redirect_url" SIZE="255" MAXLENGTH="255" VALUE="">
 <input TYPE="hidden" NAME="err_flag" SIZE="16" MAXLENGTH="15" value="0">

 <div align="center">
 <table border="0" cellspacing="0" cellpadding="0">
 <tr> <td>&nbsp;</td></tr>

 <tr align="center"> <td colspan="2"><font size="10" color="#336699">Web 
Authentication</font></td></tr>

 <tr align="center">

 <td colspan="2"> User Name &nbsp;&nbsp;&nbsp;<input type="TEXT" name="username" SIZE="25" 
MAXLENGTH="63" VALUE="">
 </td>
 </tr>
 <tr align="center" >
 <td colspan="2"> Password &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="Password" 
name="password" SIZE="25" MAXLENGTH="24">
 </td>
 </tr>

 <tr align="center">
 <td colspan="2"><input type="button" name="Submit" value="Submit" class="button" 
onclick="submitAction();">
 </td>
 </tr>
 </table>
 </div>

 </form>
 </body>
 </html> 